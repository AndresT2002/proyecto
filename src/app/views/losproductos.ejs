<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="/resources/stylesheets/productos.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/1772257877.js" crossorigin="anonymous"></script>
    <script src="../../../src/index.js"></script>
    
    



  </head>
<body>
 
  
<script >
  var total=0;
  
  function add(product,price,type){
    var productos=JSON.parse(localStorage.getItem('carrito')) || [];
    var producto={
      id:product,
      precio:price,
      tipo:type,
      
    }
      console.log(product,price);
      productos.push(producto);
      total=total +price ;
      console.log(productos)
    document.getElementById("checkout").innerHTML= `Pagar $${total}`

    localStorage.setItem('carrito',JSON.stringify(productos))
   
   
    console.log(productos)
   
    
    productos.map((producto)=>{
      console.log(producto.id);
      console.log(producto.precio)
      console.log(producto.tipo)
      
    })
   
   
   
  }
  function clearCarrito(){
    localStorage.removeItem('carrito')
  }
  
</script>



<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class=" btn-warning btn-lg btn-close " data-dismiss="modal"data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <script>
      Pene
      </script>
        
        
          
          
          
          
      </div>
      <div class="modal-footer">
        <button type="button" onclick="clearCarrito()" class=" btn-warning" >Pagar</button>
        <button type="button" class="btn btn-info">Save changes</button>
      </div>
    </div>
  </div>
</div>

    <% if (login ==false){%>
        <a href="/registro"> <div id="chat">Autenticarse/Registro</div></a>
      <% } else { %>
        
        <% } %> 
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                      <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="/">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" href="/politicas">Politicas</a></li>
                        <li class="nav-item"><a class="nav-link" href="/productos">Esencias/fragancias</a></li>
                        <li class="nav-item"><a class="nav-link" href="/carrito">Carrito</a></li>
                        
                        
                          <% if (login){%>
                            <% if(rol==="administrador"){%>
                              <li class="nav-item"><a href="config" class="nav-link">Config</a></li>
                              <% } %>
          
                                  <% if(rol==="vendedor"){%>
                                  <li class="nav-item"><a href="configvendedor" class="nav-link">Config</a></li>
                                  <% } %>  
          
                            <li class="nav-item"><a class="nav-link active" href="#"><%=name%></a></li>
                            <li class="nav-item"><a href="logout" class="nav-link">Logout</a></li>
          
                          <% } else { %>
                            <li class="nav-item"><a class="nav-link" href="#"><%=name%></a></li>
                            <li class="nav-item"><a href="formulario" class="nav-link active">Ir a Login</a></li>
                            <% } %> 
                            <li class="nav-item"><a class="nav-link" ><button id="checkout" style="border-radius: 10px;" class="btn-light button-checkout " onclick="pay()">Pagar</button></a></li>
                          </ul>
                  </div>
            </div>
          </nav>
    </header>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    <h1>FORMULA TU SHAMPOO</h1>

    
    <div class="accordion " id="lista-producto">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                ACEITES ESENCIALES
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <% let sumador = 0 
                  let tamaño=Math.ceil(inventario.length/3)
                  
              %>
              <% for (let a = 0; a < tamaño; a++) { %>

                <section class="esencias">
                  <h1></h1>
                  <div class="contenedor-esencias">
                    
                      <% for (var i = sumador; i <sumador+3; i++) { %>
                          <% let contador = i+1 %>
                          
                      <section class="esencias-item">
                          <img src="/resources/images/<%=contador+".png"%>" alt="" class="esencias-img">
                          <section class="esencia-text">
                            <% if(inventario[i]===undefined) { %>
                              <% break}
                              else { %>
                              <h2><%= inventario[i].nombre_producto %></h2>
                              <p><%= inventario[i].descripcion %> </p>
                              <p>Precio:<%= inventario[i].valor_unidad %></p>
                              <div class="float-start">
                              <button class="button agregar-carrito button-add" onclick="add(<%= inventario[i].codigo_producto%>,<%= inventario[i].valor_unidad%>,'producto',)">Agrega al Carrito</button>
                              </div><br>
                          </section>
                      </section>
                    
                      <% } %>
                      <%}%>
                    </div>
                  </section>
                      <%if(i%3==0){%>
                        <%sumador=sumador+3%>
                        <%}%>

                <% } %>





                

                
                
        <div class="accordion-item" id="lista-producto">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              ESENCIAS  
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <ul class="list-group list-group-flush">
                  <% for (let i = 0; i < esencias.length; i++) { %>
                    <li class="list-group-item"> <h5><%= esencias[i].nombre_esencia %></h5> <p>Precio: <%= esencias[i].precio_esencia %></p>  <button type="button" class="btn btn-primary btn-sm agregar-carrito d-block"onclick="add(<%= esencias[i].id%>,<%= esencias[i].precio_esencia%>,'esencia')">Agrega al Carrito</button></li>
                <% } %>
                  
                </ul>
            </div>
          </div>
        </div>
        <div class="accordion-item" id="lista-producto">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              PRESENTACION
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
            <div class="accordion-body ">
              <% for (let i = 0; i < presentaciones.length; i++) { %>
                <li class="list-group-item"  > <h5><%= presentaciones[i].tipo_presentacion %></h5>  <p>Precio: <%= presentaciones[i].precio %><button type="button" class="btn btn-primary btn-sm agregar-carrito d-block"onclick="add(<%= presentaciones[i].id%>,<%= presentaciones[i].precio%>,'presentaciones')">Agrega al Carrito</button></li>
            <% } %>
               
            </div>
          </div>
        </div>
      </div>





  
      
      
      
      



      
    <i type="button" class="fas fa-shopping-cart"data-bs-toggle="modal" data-bs-target="#exampleModal"></i>

      



    </body>
    <footer>
        <div class="iconos">
            <a href="https://facebook.com"><i class="fab fa-facebook"></i></a>
            <a href="https://instagram.com"><i class="fab fa-instagram"></i></a>
          </div>
    
        <div class="partes">
            <a href="/">Inicio</a>
            <a href="/acercade">Acerca de</a>
            <a href="/politicas">Políticas</a>
            
        </div>
        
    <div class="derechos"> &copy; 2021 Shara, reservados todos los derechos. </div>
    </footer>
    

 
</html>